{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2015/07/13/ext-js-router-mixin/","webpackCompilationHash":"c30757310a50aa570ced","result":{"data":{"site":{"siteMetadata":{"title":"Mitchell Simoens Blog","author":"Mitchell Simoens"}},"markdownRemark":{"id":"eaffb7d5-f223-5912-8a7f-b9bd3d6cc698","excerpt":"Ever since I was able to implement a router into Ext JS (beginning with 5.0.0) it has been one of the best feature adds for application developers. It may not…","html":"<p>Ever since I was able to implement a router into Ext JS (beginning with 5.0.0) it has been one of the best feature adds for application developers. It may not be flashy or spoken about a lot but it one of those missing features that should be a requirement for single page web applications. If you don’t have it in your Ext JS application, you should drop everything and implement it. :)</p>\n<p>Using it a lot myself and hearing of others using it, there are a few improvements to the Router to make it much better. It’s incredibly useful now, it can be much more useful. I’m currently rewriting the support portal (in internal testing currently) and Sencha Fiddle (almost ready for internal testing) and I’m testing some overrides for many of the improvements. One such improvement is implementing the listening of routes and the <code class=\"language-text\">redirectTo</code> method as a mixin so you can literally work with the Router in any class such as a utility singleton.</p>\n<p>All the router functionality is meant to work within a controller whether if be a global controller (extending <code class=\"language-text\">Ext.app.Controller</code>) or a view controller (extending <code class=\"language-text\">Ext.app.ViewController</code>) and since I wrote it I knew it was all implemented in the <code class=\"language-text\">Ext.app.BaseController</code>. So all I have to do is get the code from <code class=\"language-text\">BaseController</code> onto a mixin class and Ext JS has a method that makes this extremely easy. You’ll be surprised how easy this was:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Ext.define(&#39;Ext.app.route.Mixin&#39;, {\n    extend : &#39;Ext.Mixin&#39;,\n\n    requires : [\n        &#39;Ext.app.BaseController&#39;\n    ],\n\n    mixinConfig : {\n        id : &#39;route&#39;\n    },\n\n    config : {\n        routes : null\n    }\n}, function(Mixin) {\n    Mixin.borrow(Ext.app.BaseController, [&#39;redirectTo&#39;, &#39;updateRoutes&#39;, &#39;getBefore&#39;, &#39;isActive&#39;]);\n});</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The important part here is the third argument I pass into <code class=\"language-text\">Ext.define</code> which is a callback method that gets called when the class I’m defining is defined. In this method, I use the <a href=\"http://docs.sencha.com/extjs/6.0/6.0.0-classic/#!/api/Ext.Base-static-method-borrow\"><code class=\"language-text\">borrow</code></a> method which will take an array of strings that are members (can be methods or properties) to take the 4 methods from <code class=\"language-text\">BaseController</code> and apply them onto my mixin class. Now, any class I mix in this mixin class, they will get those 4 methods and therefore will be able to use the router as if the class was a controller.</p>\n<p>Let’s look at how to then implement it. First, this class needs to be placed where it can be loaded. For this, since I use Sencha Cmd for all my apps, there is a way to include this without requiring it. Any class placed in the <code class=\"language-text\">overrides</code> directory will automatically be included regardless if it’s an override or not. So I place this class in the <code class=\"language-text\">overrides/app/route/Mixin.js</code> and after a <code class=\"language-text\">sencha app watch</code> (or a build or refresh) and this mixin will automatically be included in my app. I do this because when this gets implemented into the framework, I don’t have to look for any requires throughout my app, I can just remove the file.</p>\n<p>Next, we need to add the mixin into a class. For this I create a ViewRouter utility class for starters:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Ext.define(&#39;Fiddle.util.ViewRouter&#39;, {\n    singleton : true,\n\n    mixins : [\n        &#39;Ext.app.route.Mixin&#39;\n    ],\n\n    config : {\n        routes : {\n            &#39;home&#39;            : &#39;onHome&#39;,\n            &#39;view/:view:item&#39; : {\n                action     : &#39;onView&#39;,\n                conditions : {\n                    //make :item optional\n                    &#39;:item&#39; : &#39;(?:(?:/){1}([a-z]+))?&#39;\n                }\n            }\n        }\n    },\n\n    onHome : function() { /* */ },\n\n    onView : function(view, item) { /* */ }\n});</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Just like you’d expect, you can listen for routes as if this singleton was a controller. You can also use <code class=\"language-text\">this.redirectTo(&#39;foo&#39;)</code> in this class to redirect the app to a hash also.</p>\n<h1>Disclaimer</h1>\n<p>Writing about this here makes no promise of it actually being implemented into Ext JS. I do want to but do not make any promise of if or when. If implemented, this will be 100% backwards compatible with Ext JS 5 and 6 applications where you would be handling the routes within a controller.</p>","fields":{"slug":"/2015/07/13/ext-js-router-mixin/"},"frontmatter":{"title":"Ext JS Router Mixin!","date":"July 13, 2015"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2015/07/13/ext-js-router-mixin/","previous":{"fields":{"slug":"/2015/07/03/saving-hierarchal-data-in-mysql-with-node-js/"},"frontmatter":{"title":"Saving hierarchical data in MySQL with Node.js"}},"next":{"fields":{"slug":"/2015/07/24/list-scrolldock-config/"},"frontmatter":{"title":"List and the scrollDock config"}}}}}